<h1>Hackathon</h1>

<%= form_for @challenge, :url => { :action => "create" } do |f| %>
    <%= f.text_field :title, placeholder: "title" %>
    <%= f.text_field :description, placeholder: "desc" %>
    <%= f.select :tags, ["BFS", "DP", "Basic"], :prompt => "Select One" %>
    <%= f.text_field :user_id, :type => "hidden" %>
    <%= f.submit "Challenge" %>
<% end %>

<table class="table">
  <thead>
    <tr>
      <th scope="col">Challenge_id</th>
      <th scope="col">title</th>
      <th scope="col">description</th>
      <th scope="col">tags</th>
      <th scope="col">vote_count</th>
      <th scope="col">Email</th>
      <th scope="col">vote</th>
    </tr>
  </thead>
  <tbody>
  <% @challenges.each do |challenge| %> 
    <tr>
      <th scope="row"><%= challenge.id %></th>
      <td><%= challenge.title %></td>
      <td><%= challenge.description %></td>
      <td><%= challenge.tags %></td>
      <td><%= challenge.votes.count %></td>
       <td><span><%= challenge.user.email %></span></td>
      <% if challenge.user != current_user %>
          <% if challenge.voted_by? current_user %>
           <td> <%= link_to "x", challenge_vote_path(challenge), method: :delete %></td>
          <% else %>
            <td><%= link_to "+", challenge_vote_path(challenge), method: :post %></td>
          <% end %>
        <% end %> 
    </tr>
  <% end %> 
  </tbody>
</table>
